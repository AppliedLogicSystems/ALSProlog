#!/bin/sh
#  Setup an appropriate DOS build dir relative to an "exported"
#  DOS-style subtree dir
#
#  $1 - target DOS build dir                   -- absolute paths
#	To Do: Remove absolute paths limitation
#
#  source "exported" DOS-style subtree dir -- absolute paths

SRCDIR=/apache/alsp_src

TGTDIR=$1

echo arg1=$1



echo Making DOS build dir $TGTDIR relative to $SRCDIR
mkdir $TGTDIR
cp -f  $SRCDIR/cfgs/maketop.dj2 $TGTDIR/makefile
cp -f  $SRCDIR/generic/generate/generic.dj2 $TGTDIR/generic.mkf
cp -f  $SRCDIR/port/port.dj2 $TGTDIR/port.mkf
cp -f  $SRCDIR/port/djgpp2/config.h $TGTDIR
cp -f  $SRCDIR/port/djgpp2/oconfig.h $TGTDIR
cp -f  $SRCDIR/doconfig.bat $TGTDIR

echo - bld-port:
mkdir $TGTDIR/bld-port
mkdir $TGTDIR/bld-port/alsdir
mkdir $TGTDIR/bld-port/alsdir/builtins
cp -f  $SRCDIR/builtins/*.pro $TGTDIR/bld-port/alsdir/builtins
echo - builtins done

mkdir $TGTDIR/bld-port/alsdir/library
cp -f  $SRCDIR/library/*.pro $TGTDIR/bld-port/alsdir/library
echo - library done

cd $TGTDIR/bld-port
cp -f  $SRCDIR/bld-port/makefile.dj2 makefile
cp -f  $SRCDIR/bld-port/tconfig.h.in tconfig.h
echo - bld-port done

$SRCDIR/bin/gen2dos $SRCDIR $TGTDIR

#cd $TGTDIR/bld-natv
#cp -f  $SRCDIR/bld-natv/makefile.dj2 makefile
#cp -f  $SRCDIR/bld-natv/tconfig.h.in tconfig.h
#echo - bld-natv done
