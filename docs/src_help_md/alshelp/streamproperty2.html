<h2 id="forms">FORMS</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>stream_property(Stream, Property)
</code></pre></div></div>

<h2 id="description">DESCRIPTION</h2>

<p><code class="highlighter-rouge">stream_property/2</code> is used to retrieve information on a particular stream. It may also be used to find those streams satisfying a particular property.</p>

<p><code class="highlighter-rouge">Stream</code> may be either an input or output argument. If used as an input argument it should be bound to either a stream descriptor as returned by <code class="highlighter-rouge">open/4</code> or an alias established in a call to <code class="highlighter-rouge">open/4</code>. If used as an output argument, <code class="highlighter-rouge">Stream</code> will only be bound to stream descriptors. This predicate may be used to retrieve those streams whose handles were “lost” for some reason.</p>

<p><code class="highlighter-rouge">Property</code> is a term which may take any of the following forms:</p>

<p><code class="highlighter-rouge">file_name(F)</code> – When the stream is connected to a source/sink which is a file, <code class="highlighter-rouge">F</code> will be the name of that file.</p>

<p><code class="highlighter-rouge">stream_name(N)</code> – <code class="highlighter-rouge">N</code> is unified with the name of the source/sink regardless of whether the stream is connected to a file or not.</p>

<p><code class="highlighter-rouge">mode(M)</code> – <code class="highlighter-rouge">M</code> is unified with the I/O mode which was specified at the time the stream was opened.</p>

<p><code class="highlighter-rouge">input</code> – The stream is connected to a source.</p>

<p><code class="highlighter-rouge">output</code> – The stream is connected to a sink. It is possible for a stream to have both input and output properties.</p>

<p><code class="highlighter-rouge">alias(A)</code> – If the stream has an alias, <code class="highlighter-rouge">A</code> will be unified with that alias.</p>

<p><code class="highlighter-rouge">position(P)</code> – If the stream is repositionable, <code class="highlighter-rouge">P</code> will be unified with the current position in the stream.</p>

<p><code class="highlighter-rouge">end_of_stream(E)</code> – If the stream position is located at the end of the stream, then <code class="highlighter-rouge">E</code> is unified with ‘at’ . If the stream position is past the end of stream, then <code class="highlighter-rouge">E</code> is unified with ‘past’. Otherwise, <code class="highlighter-rouge">E</code> is unified with ‘no’. In the current implementation of ALS Prolog, querying about the <code class="highlighter-rouge">end_of_stream</code> property may cause an I/O operation to result which may block.</p>

<p><code class="highlighter-rouge">eof_action(A)</code> – If the stream option <code class="highlighter-rouge">eof_action(Action)</code> was specified in the options list when the stream was opened, then <code class="highlighter-rouge">A</code> will be unified with this action. Otherwise, <code class="highlighter-rouge">A</code> will be unified with the default action appropriate for the stream.</p>

<p><code class="highlighter-rouge">snr_action(A)</code> – If the stream option <code class="highlighter-rouge">snr_action(Action)</code> was specified in the options list when the stream was opened, then <code class="highlighter-rouge">A</code> will be unified with this action. Otherwise, <code class="highlighter-rouge">A</code> will be unified with the default action appropriate for the stream.</p>

<p><code class="highlighter-rouge">reposition(R)</code> – If positioning is possible on this stream then <code class="highlighter-rouge">R</code> is unified with true; if not <code class="highlighter-rouge">R</code> is unified with false.</p>

<p><code class="highlighter-rouge">type(T)</code> – <code class="highlighter-rouge">T</code> will be unified with either text or binary, indicating the type of stream.</p>

<p><code class="highlighter-rouge">maxdepth(D)</code> – <code class="highlighter-rouge">D</code> will be unified with the default depth with which terms are written to.</p>

<p><code class="highlighter-rouge">depth_computation(DC)</code> – <code class="highlighter-rouge">DC</code> will be unified with the atom indicating the method of depth computation when writing out terms.</p>

<p><code class="highlighter-rouge">line_length(L)</code> – <code class="highlighter-rouge">L</code> will be unified to the default line length parameter which is used for determining where line breaks should be placed when writing terms.</p>

<h2 id="examples">EXAMPLES</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>%% Open 'foo' for write, but "lose" the stream descriptor.
?- open(foo,write,_).

%% Use stream_property to retrieve the stream descriptor and close it.
?- stream_property(S,file_name(foo)), close(S).
S = stream_descriptor('',closed,file,foo,[noinput|output],true,
1,0,0,0,0,true,0,wt_opts(78,40000,flat),[],true,text,
eof_code,0,0)

%% Open 'foo' for read with an alias.
?- open(foo,read,_,[alias(foo_alias)]).

%% Call stream_property to find out where end-of-stream is. Note that foo was created as the empty file above.
?- stream_property(foo_alias,end_of_stream(Where)).
Where = at

%% Call stream_property again to find out about the end-of-stream.
?- stream_property(foo_alias,end_of_stream(Where)).
Where = past

%% Call stream_property to find out the name of the file associated with the alias.
?- stream_property(foo_alias,file_name(Name)).
Name = foo

%% Get all of the names attached to streams.
?- setof(N,S^stream_property(S,stream_name(N)),L).
N = N
S = S
L = ['$stderr','$stdin','$stdout',foo]
</code></pre></div></div>

<h2 id="see-also">SEE ALSO</h2>

<ul>
  <li><code class="highlighter-rouge">open/4</code></li>
  <li><code class="highlighter-rouge">close/1</code></li>
  <li><code class="highlighter-rouge">set_stream_position/2</code></li>
  <li><code class="highlighter-rouge">at_end_of_stream/1</code></li>
  <li><code class="highlighter-rouge">set_line_length/2</code></li>
  <li>`User Guide (Prolog I/O)</li>
</ul>

