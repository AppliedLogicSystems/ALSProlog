<h2 id="forms">FORMS</h2>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>retract(Clause)

retract(Clause, DBRef)

erase(DBRef)
</code></pre></div></div>
<h2 id="description">DESCRIPTION</h2>

<p>When <code class="highlighter-rouge">Clause</code> is bound to an atom or a structured term, <code class="highlighter-rouge">retract/1</code> searches the current module for a clause that will unify with <code class="highlighter-rouge">Clause</code>. When a matching clause is found in the database, <code class="highlighter-rouge">Clause</code> is unified with the structure corresponding to the clause. The clause is then removed from the database.</p>

<p><code class="highlighter-rouge">retract/2</code> additionally unifies <code class="highlighter-rouge">DBRef</code> with the database reference of the clause.</p>

<p><code class="highlighter-rouge">erase/1</code> removes the clause associated with <code class="highlighter-rouge">DBRef</code> from the database. Note that <code class="highlighter-rouge">erase(DBRef)</code> should never be called following <code class="highlighter-rouge">retract(Clause, DBRef)</code> since at that point <code class="highlighter-rouge">DBRef</code> is no longer a valid database reference.</p>

<p><code class="highlighter-rouge">retract/1</code> and <code class="highlighter-rouge">retract/2</code> will repeatedly generate and remove clauses upon backtracking. <code class="highlighter-rouge">:/2</code> can be used to specify which module should be searched.</p>

<h2 id="examples">EXAMPLES</h2>

<p>The following example shows how <code class="highlighter-rouge">retract/1</code> and <code class="highlighter-rouge">retract/2</code> can be used to get rid of all the comic book heroes that live in our modules. First we create all the heroes by consulting <code class="highlighter-rouge">user</code>, typing in facts from the console.  Then we get rid of <code class="highlighter-rouge">hero(spiderman)</code> by using a simple call to <code class="highlighter-rouge">retract/1</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- [user].
hero(spiderman).
hero(superman).
hero(batman).
module women.
hero(superwoman).
endmod.
^D
yes.

?- retract(hero(spiderman)).

yes.
</code></pre></div></div>
<p>Continuing the example, we show what heroes are left by using the <code class="highlighter-rouge">listing/1</code> procedure. After that, we remove <code class="highlighter-rouge">hero(superman)</code> with a <code class="highlighter-rouge">retract/2</code> call. The old database reference to the man of steel is instantiated to <code class="highlighter-rouge">Ref</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- listing(hero/1).
%user:hero/1
hero(superman).
hero(batman).
%women:hero/1
hero(superwoman).
yes.

?- retract(hero(superman),Ref).

Ref='$dbref'(5208,15,2384,1)

yes.
</code></pre></div></div>
<p>Next, we use <code class="highlighter-rouge">clause/3</code> to find the database reference of hero(batman). With this, we use the database reference in a <code class="highlighter-rouge">retract/2</code> call to remove <code class="highlighter-rouge">hero(batman)</code> from the database. Note that when the call to  <code class="highlighter-rouge">retract/2</code> is made,
the <code class="highlighter-rouge">Clause</code> argument is uninstantiated. After the call to <code class="highlighter-rouge">retract/2</code> has succeeded, <code class="highlighter-rouge">Clause</code> is instantiated to 
the clause that was removed.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- clause(hero(batman),Body,Ref).
Body=true
Ref='$dbref'(5052,15,2384,2)

yes.

?- retract(Clause,'$dbref'(5052,15,2384,2)).
Clause=hero(batman)

yes.
</code></pre></div></div>
<p>Now, we list the heroes left in the database. Only <code class="highlighter-rouge">hero(superwoman)</code> is left, but sheâ€™s in a different module. However, using the Mod:Goal construct, we can remove her too:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- listing(hero/1).
%women:hero/1
hero(superwoman).

yes.

?- women:retract(hero(X)).
X=superwoman
yes.

?- listing(hero/1).
yes.
</code></pre></div></div>
<p>As the last call to <code class="highlighter-rouge">listing/1</code> shows, there are no more heroes left in the database. (Who knows what evil may be lurking in the garbage collector though!)</p>

<h2 id="see-also">SEE ALSO</h2>

<ul>
  <li>
    <p><code class="highlighter-rouge">abolish/1</code><br />
<code class="highlighter-rouge">clause/1</code></p>
  </li>
  <li>[Bowen 91, 7.3]</li>
  <li>[Clocksin 81, 6.4]</li>
  <li>[Bratko 86, 7.4]</li>
  <li>[Sterling 86, 12.2]</li>
</ul>

