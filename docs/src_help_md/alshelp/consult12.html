<h2 id="forms">FORMS</h2>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>consult(FileSpec)

consult(FileSpec, Options)
</code></pre></div></div>
<p><code class="highlighter-rouge">[File | Files ]</code><br />
         <em>Synonym for <code class="highlighter-rouge">consult(FileSpec)</code> when <code class="highlighter-rouge">FileSpec</code> is <code class="highlighter-rouge">[File | Files ]</code></em></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>consultq(File)

reconsult(File)
</code></pre></div></div>
<p><code class="highlighter-rouge">[-File | Files ]</code><br />
         <em>Equivalent to a sequence of reconsult/consult calls, corresponding to the appearance of - or no -.</em></p>

<h2 id="description">DESCRIPTION</h2>

<p><code class="highlighter-rouge">FileSpec</code> should be instantiated either to an atom that is the name of a file, or to a list of atoms which are names of files. For each <code class="highlighter-rouge">File</code> occurring on <code class="highlighter-rouge">FileSpec</code>,</p>

<ol>
  <li><code class="highlighter-rouge">File</code> is opened and read,</li>
  <li>Any clauses currently in memory which were read and asserted previously <em>from this same <code class="highlighter-rouge">File</code></em> are erased,</li>
  <li>The clauses occurring in <code class="highlighter-rouge">File</code> are asserted into the database,</li>
  <li>Any directives occurring in <code class="highlighter-rouge">File</code> are executed immediately when encountered.</li>
</ol>

<p><code class="highlighter-rouge">consultq/1</code> behaves exactly like <code class="highlighter-rouge">consult/1</code>, except that printing of normal <code class="highlighter-rouge">consult/1</code> messages on the terminal is suppressed. [Note, however, that if the <code class="highlighter-rouge">File</code> does not exist, an error message will still be printed.]</p>

<p><code class="highlighter-rouge">reconsult/1</code> is identical to <code class="highlighter-rouge">consult/1</code> and is preserved for historical consistency.</p>

<p><code class="highlighter-rouge">consult/1</code>, <code class="highlighter-rouge">reconsult/1</code>, and <code class="highlighter-rouge">consultq/1</code> are defined by :</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>consult(File) :- consult(File, [ ]) .

reconsult(File :- consult(File, [ ]) .

consultq(File) :- consult(File, [verbosity(quiet) ]) .
</code></pre></div></div>
<p>If File is the atom user, then clauses and commands will be read in from the keyboard until an end of file is read.</p>

<p>The Options argument of consult/2 is a list of consult options, and their effects, are as follows :</p>

<p><code class="highlighter-rouge">verbosity(Value)</code>
<br />      <code class="highlighter-rouge">Value = noisy/quiet</code>; turns on/off the printing of messages during consulting.</p>

<p><code class="highlighter-rouge">tgtmod(TgtMod)</code>
<br />      Any clauses in <code class="highlighter-rouge">File</code> which are not explicitly enclosed in module begin/end directives will be asserted to module <code class="highlighter-rouge">TgtMod</code>. The default value of <code class="highlighter-rouge">TgtMod</code> is <code class="highlighter-rouge">user</code>.</p>

<p><code class="highlighter-rouge">search_path(DirPathList)</code>
<br />      <code class="highlighter-rouge">DirPathList</code> is a list of directory path names. The <code class="highlighter-rouge">File(s)</code> to be consulted are searched for on this path. If the current directory is not listed on <code class="highlighter-rouge">DirPathList</code>, it is added at the beginning.</p>

<p><code class="highlighter-rouge">strict_search_path(DirPathList)</code>
<br />      Like <code class="highlighter-rouge">search_path(DirPathList)</code>, but the current directory is not added even if not present on <code class="highlighter-rouge">DirPathList</code>.</p>

<p><code class="highlighter-rouge">consult(Value)</code>
<br />      <code class="highlighter-rouge">Value = true/false</code>. If <code class="highlighter-rouge">Value</code> = true, previous clauses from the <code class="highlighter-rouge">File</code> being consulted are not erased, so that the net effect is additive.</p>

<p><code class="highlighter-rouge">ensure_loaded(Value)</code>
<br />      <code class="highlighter-rouge">Value = true/false</code>. This option has effect only when operating under one of the ALS development shells(ALS IDE or the TTY shell). If <code class="highlighter-rouge">Value = true</code>, and if <code class="highlighter-rouge">File</code> has previously been consulted, no action is taken for <code class="highlighter-rouge">File</code>. If <code class="highlighter-rouge">Value = false</code>, <code class="highlighter-rouge">File</code> is consulted.</p>

<h2 id="examples">EXAMPLES</h2>
<p>Let the file <code class="highlighter-rouge">fruit.pro</code> contain:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fruit(apple).
fruit(X) :- nut(X).
fruit(orange).
nut(hazelnut).
</code></pre></div></div>
<p>Then:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- consult(fruit).

yes.
?- listing.

% user:fruit/1
fruit(apple).
fruit(_A) :- nut(_A).
fruit(orange).

% user:nut/1
nut(hazelnut).

yes.
</code></pre></div></div>
<p>Now, using a separate editor process, edit <code class="highlighter-rouge">fruit.pro</code> so that it contains:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fruit(apple).
fruit(X) :- nut(X).
fruit(raspberry).
nut(hazelnut).
nut(acorn).
</code></pre></div></div>
<p>Now, consult <code class="highlighter-rouge">fruit.pro</code> again:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- consult(fruit).

yes.
?- listing.

% user:fruit/1
fruit(apple).
fruit(_A) :- nut(_A).
fruit(raspberry).

% user:nut/1
nut(hazelnut).
nut(acorn).

yes.
</code></pre></div></div>
<p>The following example illustrates the practice of putting calls to consult/1 inside of files to be(re) consulted. We have the three files with contents as follows :</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>letters.pro
-----------
symbol(a).
symbol(b).
symbol(c).

numbers.pro
-----------
symbol('1').
symbol('2').
symbol('3').

topfile.pro
-----------
symbol(x).
symbol(y).
symbol(z).

:- consult(letters).
:- consult(numbers).
</code></pre></div></div>
<p>The following conversation illustrates the effect of repetitive consult (or reconsult) with embedded consults:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- consult(letters).

yes.

?- listing.
%user:symbol/1
symbol(a).
symbol(b).
symbol(c).
yes.

?- consult(topfile).

yes.

?- listing.
%user:symbol/1
symbol(a).
symbol(b).
symbol(c).
symbol(x).
symbol(y).
symbol(z).
symbol('1').
symbol('2').
symbol('3').
</code></pre></div></div>

<h2 id="notes">NOTES</h2>

<p><code class="highlighter-rouge">reconsult/1</code> is not compatible with the DEC-10 notion of reconsult. DEC-10 reconsult would, upon seeing a procedure not already seen in a file, wipe out or abolish all clauses for that predicate before adding the new clause in question.</p>

<p>The present semantics of <code class="highlighter-rouge">reconsult/1</code> are that all clauses which were previously defined in a <code class="highlighter-rouge">File</code> being loaded are wiped out, with new clauses replacing (positionally in the procedure) any old clauses. Thus, a procedure that is defined by several files will not be entirely wiped out when <code class="highlighter-rouge">reconsult/1</code> is invoked on just one of the procedure’s files – only those clauses defined by the one given <code class="highlighter-rouge">File</code> are wiped out and subsequently replaced.</p>

<p>The file <code class="highlighter-rouge">user</code> is special. When <code class="highlighter-rouge">user</code> is consulted or reconsulted, the input clauses will be taken from the user’s terminal. The end-of-file character (often Control-D or Contol-Z) should be used to terminate the consultation and return to the shell.</p>

<h2 id="see-also">SEE ALSO</h2>

<ul>
  <li>[Bratko 86, 6.5]</li>
  <li>[Clocksin 81, 6.1]</li>
</ul>
