<h2 id="forms">FORMS</h2>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>extend_main_menubar(Label, MenuEntriesList)

menu_entries_list(MenuPath, EntriesList)

menu_entries_list(Interp, MenuPath, EntriesList)

path_to_main_menu_entry(Index, SubMenuPath)

path_to_menu_entry(MenuPath, Index, SubMenuPath)

path_to_menu_entry(Interp, MenuPath, Index, SubMenuPath)

add_to_main_menu_entry(Index, Entry)

extend_cascade(Entry, MenuPath, Interp)
</code></pre></div></div>
<h2 id="description">DESCRIPTION</h2>

<p>The general call</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     extend_main_menubar(Label, MenuEntriesList)
</code></pre></div></div>
<p>adds entries to the main menubar in the ALS Prolog development environment.  <code class="highlighter-rouge">Label</code> should be the label which will appear on the menu bar, and <code class="highlighter-rouge">MenuEntriesList</code> is a Prolog list containing menu entry descriptors, which are either an <code class="highlighter-rouge">Atom</code> alone, or an expression of the form</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     Atom + Expr
</code></pre></div></div>
<p>where <code class="highlighter-rouge">Atom</code> is a prolog atom which will serve as the new menu entry, and <code class="highlighter-rouge">Expr</code> is a menu entry action expression, which can be one of the following :</p>

<ul>
  <li>
    <p><code class="highlighter-rouge">tcl(TclExpr)</code></p>
  </li>
  <li>
    <p><code class="highlighter-rouge">cascade(SubLabel, SubList)</code></p>
  </li>
  <li>
    <p>PrologCall</p>
  </li>
</ul>

<p>Here, <code class="highlighter-rouge">TclExpr</code> can be any Tcl/Tk expression for evaulation, and <code class="highlighter-rouge">PrologCall</code> is any ground Prolog goal. The entry</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cascade(SubLabel, SubList)
</code></pre></div></div>
<p>allows one to create menu entries which are themselves cascades. In this case, <code class="highlighter-rouge">SubLabel</code> must be an atom which will serve as the entry’s label, and <code class="highlighter-rouge">SubList</code> is (recursively) a list of menu entry descriptors.</p>

<p>If <code class="highlighter-rouge">MenuPath</code> is a Tk path to a menu (top level or subsidiary), then the call</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>menu_entries_list(MenuPath, EntriesList)
</code></pre></div></div>
<p>will succeed if <code class="highlighter-rouge">EntriesList</code> is the list of labels for the entries on that menu, in order. As usual,</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>menu_entries_list(MenuPath, EntriesList)
     :-
     menu_entries_list(tcli, MenuPath, EntriesList).
</code></pre></div></div>
<p>Paths to menu entries are lists of integers representing the path from the root of the menu tree to a particular entry. When one indexes menu entries, the indicies are integers beginning at <code class="highlighter-rouge">0</code>. If<code class="highlighter-rouge"> MenuPath</code> is a Tk path to a menu (top level or subsidiary), and if <code class="highlighter-rouge">Index</code> is an integer <code class="highlighter-rouge">&gt;= 0</code>, and if the <code class="highlighter-rouge">Index'th</code> entry of <code class="highlighter-rouge">MenuPath</code> is a cascade, so that it has an associated menu, then <code class="highlighter-rouge">SubMenuPath</code> is a path to that associated menu.</p>

<p>As usual,</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>path_to_main_menu_entry(Index, SubMenuPath)
    :-
    path_to_menu_entry(shl_tcli, '.topals.mmenb', Index, SubMenuPath).

path_to_menu_entry(MenuPath, Index, SubMenuPath)
    :-
    path_to_menu_entry(tcli, MenuPath, Index, SubMenuPath).
</code></pre></div></div>

<p>Finally, one can add new entries at the ends(bottoms) of existing menu cascades, as follows:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>add_to_main_menu_entry(Index, Entry)
    :-
    path_to_main_menu_entry(Index, MenuPath),
    extend_cascade(Entry, MenuPath, shl_tcli).
</code></pre></div></div>
<p>The predicate</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>extend_cascade(Entry, MenuPath, Interp)
</code></pre></div></div>
<p>adds <code class="highlighter-rouge">Entry</code> to the end of menu <code class="highlighter-rouge">MenuPath</code> under interpreter <code class="highlighter-rouge">Interp</code>.</p>

<h2 id="examples">EXAMPLES</h2>

<p>After executing the call</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- extend_main_menubar('Test Extend', ['Test Entry #1', 'Test Entry #2']).
</code></pre></div></div>
<p>the main listener window would look like this when clicking on the newly added menubar entry:</p>

<p><img src="images/x_menu-1.gif" alt="" /></p>

<p>Suppose we define</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>test_write
    :-
    printf(user_output, 'This is a test ...\n', []),
    flush_input(user_input).
</code></pre></div></div>
<p>and replace the call considered above by:</p>

<p>?- extend_main_menubar(‘Test Extend’, 
                [‘Test Entry #1’ + tcl(‘bell’), 
                 ‘Test Entry #2’ + test_write]).</p>

<p>Then the appearance of the main menu and the new pulldown will be the same, but chooseing <code class="highlighter-rouge">Test Entry #1</code> will cause the bell to ring, and choosing <code class="highlighter-rouge">Test Entry #2</code> will cause</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>This is a test ...
</code></pre></div></div>
<p>to be written on the listener console.</p>

<p>Note that the following is the case :</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- menu_entries_list(shl_tcli, ' .topals.mmenb ', EntriesList).

EntriesList = [File, Edit, Prolog, Tools, Help].
</code></pre></div></div>
<p>And,</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- path_to_main_menu_entry(4, SubMenuPath).

SubMenuPath = .topals.mmenb.help
</code></pre></div></div>
<p>Finally,</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- add_to_main_menu_entry(3, 'My Entry' + test_write).
</code></pre></div></div>
<p>will add an entry at the end of the <code class="highlighter-rouge">Tools</code> cascade.</p>

