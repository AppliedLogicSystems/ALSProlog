<h2 id="forms">FORMS</h2>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rexec(Command, Options)
</code></pre></div></div>
<h2 id="description">DESCRIPTION</h2>

<p><code class="highlighter-rouge">rexec/2</code> is an interface to the rexec system call which may be used to run commands on remote machines. When remote execution is not desired, fork and exec (Unix system calls) are used to run the command on the local machine. <code class="highlighter-rouge">Command</code> should be an atom representing the command to run. <code class="highlighter-rouge">Options</code> is a list containing zero or more of the following forms :</p>

<p><code class="highlighter-rouge">host(HostName)</code> – execute the command on the machine named by <code class="highlighter-rouge">HostName</code>.</p>

<p><code class="highlighter-rouge">username(User)</code> – run the command as user <code class="highlighter-rouge">User</code>.</p>

<p><code class="highlighter-rouge">password(Password)</code> – provides the password for authentication purposes. If no password is supplied, you will be prompted for one (by the rexec daemon) .</p>

<p><code class="highlighter-rouge">rstream(Stream, OpenOpts)</code> – designates the input stream from which to read the output of the command. This stream will be connected to the standard output of the command. <code class="highlighter-rouge">Stream</code> will be bound to a stream descriptor. <code class="highlighter-rouge">OpenOpts</code> is a list containing options suitable for a call to <code class="highlighter-rouge">open/4</code>.</p>

<p><code class="highlighter-rouge">wstream(Stream, OpenOpts)</code> – designates the output stream to write to. This output stream will be connected to standard input of the command.</p>

<p><code class="highlighter-rouge">estream(Stream, OpenOpts)</code> – designates the input stream for use in obtaining error messages from the command. This stream will be connected to standard error for the command.</p>

<p>If any of host, username, or password are specified, <code class="highlighter-rouge">rexec/2</code> will attempt to contact the rexec daemon to remotely run the command on the specified machine. The remote execution daemon, rexecd, requires authentication. This means that either a username and password must be supplied in the program(with the <code class="highlighter-rouge">username/1</code> and <code class="highlighter-rouge">password/1</code> forms), interactively, or via the .netrc file. Not all remote execution daemons support authentication via the .netrc file. See your local system documentation for information about the .netrc file.</p>

<p>If none of host, username, or password are specified, then <code class="highlighter-rouge">rexec/2</code> will use the traditional fork and exec mechanism to run the command on the local machine. If remote execution is still desired, but the rexec daemon’s authentication mechanisms deemed too odious, then rsh (running on the local machine) may be used to run a command on a remote machine.</p>

<h2 id="examples">EXAMPLES</h2>

<p>The following procedure will call the unix word count program, wc, to determine the length of an atom.
[[FAILS on macOS 10.12.6]]</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>slow_atom_length(A, Len) 
    :-
    rexec(' wc -c ', [rstream(RS, []), wstream(WS, [])]),
    write(WS, A),
    close(WS),
    read_term(RS, Len, [attach_fullstop(true)]),
    close(RS).

?- slow_atom_length('The rain in Spain',Len).
Len=17
yes.
</code></pre></div></div>

<p>The version of slow_atom_length/2 above assumes one is running on a Unix machine and calls wc running on the same machine. The version below, slow_atom_length/3, will work on any system which supports sockets (Unix workstations, Windows 95 with WinSock, Macintosh):</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rstrlen(Host, A, Len) 
    :-
    rexec(' wc -c ', [host(Host), rstream(RS, []), wstream(WS, [])]),
    write(WS, A),
    close(WS),
    read_term(RS, Len, [attach_fullstop(true) ]),
    close(RS) .
</code></pre></div></div>
<p>Here is an interaction running over the internet :</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- rstrlen('bongo.cs.anywhere.edu','abcdef',X).
Name(bongo.cs.anywhere.edu:ken):mylogin
Password(bongo.cs.anywhere.edu:ken):&lt;mypasswd&gt;
X=6
</code></pre></div></div>

<h2 id="notes">NOTES</h2>

<p>This function is not very consistent with regards to error handling. Some errors will be thrown, while others will print a diagnostic. Other errors will cause failure.</p>

<h2 id="see-also">SEE ALSO</h2>

<ul>
  <li>`open/[3,4]</li>
</ul>
