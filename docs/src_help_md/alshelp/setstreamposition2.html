<h2 id="forms">FORMS</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set_stream_position(Stream_or_Alias, Position)
</code></pre></div></div>

<h2 id="description">DESCRIPTION</h2>

<p><code class="highlighter-rouge">set_stream_position/2</code> is used to change the stream position for a stream which is repositionable.</p>

<p><code class="highlighter-rouge">Stream_or_Alias</code> is the stream for which to change the stream position.</p>

<p>Position is a term which represents the new position to set. It takes one of the following forms:</p>

<ul>
  <li>An absolute integer which represents the address of a character in the stream. The beginning of the stream or the first character in the stream has position 0 The second character in the stream has position 1 and so on.</li>
  <li>The atom <code class="highlighter-rouge">beginning_of_stream</code>.</li>
  <li>The term <code class="highlighter-rouge">beginning_of_stream(N)</code> where <code class="highlighter-rouge">N</code> is an integer greater than zero. The position represented by this term is the beginning of the stream plus <code class="highlighter-rouge">N</code> bytes.</li>
  <li>The atom <code class="highlighter-rouge">end_of_stream</code>.</li>
  <li>The term <code class="highlighter-rouge">end_of_stream(N)</code> where <code class="highlighter-rouge">N</code> is an integer less than or equal to zero. This allows positions (earlier than the end of stream) to be specified relative to the end of the stream. The position represented by this term is the end-of-stream position plus <code class="highlighter-rouge">N</code> bytes.</li>
  <li>The atom <code class="highlighter-rouge">current_position</code>.</li>
  <li>The term <code class="highlighter-rouge">current_position(N)</code> where <code class="highlighter-rouge">N</code> is an integer. This allows positions to be specified relative to the current position in the file.</li>
</ul>

<h2 id="examples">EXAMPLES</h2>

<p>Suppose that the file “test” is comprised of the characters “abcdefgh\n”.</p>

<p>Open and read the first character from the file test.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- open(test,read,_,[alias(test_alias)]), get_char(test_alias,C).
C = a
</code></pre></div></div>

<p>Seek to two characters before end of file and get the character at this position.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- set_stream_position(test_alias,end_of_stream(-2)),
?-_ get_char(test_alias,C).
C = h
</code></pre></div></div>

<p>Seek to current position minus two and get the character at this position.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- set_stream_position(test_alias,current_position(-2)),
?-_ get_char(test_alias,C).
C = g
</code></pre></div></div>

<p>Seek to fourth character in file and get it. Recall that the first character has address 0.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- set_stream_position(test_alias,3), get_char(test_alias,C).
C = d
</code></pre></div></div>

<p>Get this same character again by backing up one.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- set_stream_position(test_alias,current_position(-1)),
?-_ get_char(test_alias,C).
C = d
</code></pre></div></div>

<p>Get the next character in the stream.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- get_char(test_alias,C).
C = e
</code></pre></div></div>

<p>Get the current stream position.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- stream_property(test_alias,position(P)).
P = 5
</code></pre></div></div>

<p>Get the current stream position, seek to the beginning of the stream and get that character, then seek back to the old position and get the character at that position.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?- stream_property(test_alias, position(P)),
?-_ set_stream_position(test_alias, beginning_of_stream),
?-_ get_char(test_alias, C1),
?-_ set_stream_position(test_alias, P),
?-_ get_char(test_alias, C2).
P = 5
C1 = a
C2 = f
</code></pre></div></div>

<h2 id="errors">ERRORS</h2>

<p><code class="highlighter-rouge">Stream_or_Alias</code> is a variable</p>

<p>– – – – &gt; <code class="highlighter-rouge">instantiation_error</code></p>

<p><code class="highlighter-rouge">Position</code> is a variable</p>

<p>– – – – &gt; <code class="highlighter-rouge">instantiation_error</code></p>

<p><code class="highlighter-rouge">Stream_or_Alias</code> is neither a variable nor a stream descriptor nor an alias</p>

<p>– – – – &gt; <code class="highlighter-rouge">domain_error(stream_position, Position)</code></p>

<p><code class="highlighter-rouge">Position</code> is neither a variable nor a stream position</p>

<p>– – – – &gt; <code class="highlighter-rouge">domain_error(stream_position, Position)</code></p>

<p><code class="highlighter-rouge">Stream_or_Alias</code> is not associated with an open stream</p>

<p>– – – – &gt; <code class="highlighter-rouge">existence_error(stream, Stream_or_Alias)</code></p>

<p><code class="highlighter-rouge">Stream_or_Alias</code> has stream property <code class="highlighter-rouge">reposition(false)</code></p>

<p>– – – – &gt; <code class="highlighter-rouge">permission_error(reposition, stream, Stream_or_Alias)</code></p>

<h2 id="notes">NOTES</h2>

<p>As the example above demonstrates, <code class="highlighter-rouge">set_stream_position/2</code> may be used when used in conjunction with <code class="highlighter-rouge">stream_property/2</code>. Typically a program will get the current position using <code class="highlighter-rouge">stream_property/2</code> and later set the stream position using this saved position.</p>

<h2 id="see-also">SEE ALSO</h2>

<ul>
  <li><code class="highlighter-rouge">open/4</code></li>
  <li><code class="highlighter-rouge">get_char/2</code></li>
  <li><code class="highlighter-rouge">stream_property/2</code></li>
  <li>User Guide (Prolog I/O)</li>
</ul>
